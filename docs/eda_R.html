<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Advanced Statistical ML - 3&nbsp; Exploratory Data Analysis in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./eda_Py.html" rel="next">
<link href="./prerequisites.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis in R</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced Statistical ML</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prerequisites.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Prerequisites</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda_R.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda_Py.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis in Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="toc-section-number">4</span>  Overview</a></li>
  <li><a href="#tabular-data" id="toc-tabular-data" class="nav-link" data-scroll-target="#tabular-data"><span class="toc-section-number">5</span>  Tabular Data</a>
  <ul class="collapse">
  <li><a href="#tabular-data-in-r" id="toc-tabular-data-in-r" class="nav-link" data-scroll-target="#tabular-data-in-r"><span class="toc-section-number">5.1</span>  Tabular Data in R</a></li>
  </ul></li>
  <li><a href="#text-data" id="toc-text-data" class="nav-link" data-scroll-target="#text-data"><span class="toc-section-number">6</span>  Text Data</a>
  <ul class="collapse">
  <li><a href="#text-data-in-r" id="toc-text-data-in-r" class="nav-link" data-scroll-target="#text-data-in-r"><span class="toc-section-number">6.1</span>  Text Data in R</a></li>
  </ul></li>
  <li><a href="#image-data" id="toc-image-data" class="nav-link" data-scroll-target="#image-data"><span class="toc-section-number">7</span>  Image Data</a>
  <ul class="collapse">
  <li><a href="#image-data-in-r" id="toc-image-data-in-r" class="nav-link" data-scroll-target="#image-data-in-r"><span class="toc-section-number">7.1</span>  Image Data in R</a></li>
  </ul></li>
  <li><a href="#audio-data" id="toc-audio-data" class="nav-link" data-scroll-target="#audio-data"><span class="toc-section-number">8</span>  Audio Data</a>
  <ul class="collapse">
  <li><a href="#audio-data-in-r" id="toc-audio-data-in-r" class="nav-link" data-scroll-target="#audio-data-in-r"><span class="toc-section-number">8.1</span>  Audio Data in R</a></li>
  </ul></li>
  <li><a href="#geospatial-data" id="toc-geospatial-data" class="nav-link" data-scroll-target="#geospatial-data"><span class="toc-section-number">9</span>  Geospatial Data</a>
  <ul class="collapse">
  <li><a href="#geospatial-data-in-r" id="toc-geospatial-data-in-r" class="nav-link" data-scroll-target="#geospatial-data-in-r"><span class="toc-section-number">9.1</span>  Geospatial Data in R</a>
  <ul class="collapse">
  <li><a href="#raster-tutorial" id="toc-raster-tutorial" class="nav-link" data-scroll-target="#raster-tutorial"><span class="toc-section-number">9.1.1</span>  Raster Tutorial</a></li>
  <li><a href="#looking-at-a-topographical-map-of-catalina-island-and-the-south-bay" id="toc-looking-at-a-topographical-map-of-catalina-island-and-the-south-bay" class="nav-link" data-scroll-target="#looking-at-a-topographical-map-of-catalina-island-and-the-south-bay"><span class="toc-section-number">9.1.2</span>  Looking at a topographical map of Catalina Island and the South Bay</a></li>
  <li><a href="#looking-at-raster-data-with-los-angeles-raster-file" id="toc-looking-at-raster-data-with-los-angeles-raster-file" class="nav-link" data-scroll-target="#looking-at-raster-data-with-los-angeles-raster-file"><span class="toc-section-number">9.1.3</span>  Looking at raster data with Los Angeles raster file</a></li>
  <li><a href="#osmdata-package" id="toc-osmdata-package" class="nav-link" data-scroll-target="#osmdata-package"><span class="toc-section-number">9.1.4</span>  OSMDATA Package</a></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="toc-section-number">9.2</span>  </a></li>
  <li><a href="#geospatial-data-in-python" id="toc-geospatial-data-in-python" class="nav-link" data-scroll-target="#geospatial-data-in-python"><span class="toc-section-number">9.3</span>  Geospatial Data in Python</a></li>
  </ul></li>
  <li><a href="#database-query-with-sql" id="toc-database-query-with-sql" class="nav-link" data-scroll-target="#database-query-with-sql"><span class="toc-section-number">10</span>  Database Query with SQL</a></li>
  <li><a href="#interactive-data-visualization" id="toc-interactive-data-visualization" class="nav-link" data-scroll-target="#interactive-data-visualization"><span class="toc-section-number">11</span>  Interactive Data Visualization</a>
  <ul class="collapse">
  <li><a href="#enhanced-graphics-with-plotly" id="toc-enhanced-graphics-with-plotly" class="nav-link" data-scroll-target="#enhanced-graphics-with-plotly"><span class="toc-section-number">11.1</span>  Enhanced Graphics with Plotly</a></li>
  <li><a href="#shiny-apps" id="toc-shiny-apps" class="nav-link" data-scroll-target="#shiny-apps"><span class="toc-section-number">11.2</span>  Shiny Apps</a></li>
  </ul></li>
  <li><a href="#building-apps-for-data-exploration" id="toc-building-apps-for-data-exploration" class="nav-link" data-scroll-target="#building-apps-for-data-exploration"><span class="toc-section-number">12</span>  Building Apps for Data Exploration</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis in R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Overview</h1>
<p>There’s no data science without data. And the “learning” in ML is based on the data we observe. The field of statistics is all about the mathematics of data. Over the past century, the field engaged in a rigorous investigation of the origin, nature, transformation and prediction of data from a myriad of angles. That legacy feeds into the computer age and forms the theoretical foundation upon which data science and machine learning have pushed the boundaries of knowledge. What statistics could not do effectively is extend itself beyond tabular data comprised of quantitative and qualitative variables - to new data types. With help from computer science, analysis of new kinds of data became practical.</p>
<p>Find a video and a webpage tutorial on one of the topics below. Basics: read in data and one basic visualization. Email me what you want to do from below</p>
</section>
<section id="tabular-data" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Tabular Data</h1>
<section id="tabular-data-in-r" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="tabular-data-in-r"><span class="header-section-number">5.1</span> Tabular Data in R</h2>
<p><strong>Intro to Data Frames</strong></p>
<p>A data frame is an object in R that consists of data with labels for columns and/or rows. It is the most fundamental structure on which data analysis is performed in R. Essentially, it is an augmented matrix with the ability to include variable names for each column, and identification of individuals in your data for each row. The modern, “tidy” version of a data frame is called a <strong>tibble</strong>. Although there is straightforward base R syntax for working with tabular data, we’ll keep it tidy in anticipation of our use of the popular <strong>ggplot2</strong> package for visualizations and <strong>tidymodels</strong> for statistical learning. Back to the subject at hand. If, for example we wanted to create a data set in which the individuals are the top five scorers from the 2018-2019 NBA season, and the variables are their points per game and team name, as found <a href="https://www.basketball-reference.com/leagues/NBA_2019_per_game.html">here</a>, we could do the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>NBA_PPG<span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">Players=</span><span class="fu">c</span>(<span class="st">"Harden"</span>,<span class="st">"George"</span>,<span class="st">"Antetokounmpo"</span>,<span class="st">"Embiid"</span>,<span class="st">"Curry"</span>),<span class="at">Team=</span><span class="fu">c</span>(<span class="st">"HOU"</span>,<span class="st">"OKC"</span>,<span class="st">"MIL"</span>,<span class="st">"PHI"</span>,<span class="st">"GSW"</span>),<span class="at">PPG=</span><span class="fu">c</span>(<span class="fl">36.1</span>,<span class="dv">28</span>,<span class="fl">27.7</span>,<span class="fl">27.5</span>,<span class="fl">27.3</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>NBA_PPG</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  Players       Team    PPG
  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt;
1 Harden        HOU    36.1
2 George        OKC    28  
3 Antetokounmpo MIL    27.7
4 Embiid        PHI    27.5
5 Curry         GSW    27.3</code></pre>
</div>
</div>
<p>Note that this requires us to load the dplyr package from the tidyverse. To get a quick snapshot of the nature of the variables in your data frame, type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(NBA_PPG)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5 × 3] (S3: tbl_df/tbl/data.frame)
 $ Players: chr [1:5] "Harden" "George" "Antetokounmpo" "Embiid" ...
 $ Team   : chr [1:5] "HOU" "OKC" "MIL" "PHI" ...
 $ PPG    : num [1:5] 36.1 28 27.7 27.5 27.3</code></pre>
</div>
</div>
<p>Note that the variable *Team*, being of the <em>character</em> type is automatically treated as a “Factor” with data frames, but not tibbles. This may or may not be necessary for you depending on downstream statistical analyses intended for this data frame.</p>
<p>At times it will be essential to append our data frame with additional observations on a new variable. Suppose for the NBA data we’d like to include rebounds per game for these five players: 6.6,8.2,12.5,13.6,5.3. We can use the <em>mutate</em> function to implement this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>NBA_data<span class="ot">&lt;-</span>NBA_PPG <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">RPG=</span><span class="fu">c</span>(<span class="fl">6.6</span>,<span class="fl">8.2</span>,<span class="fl">12.5</span>,<span class="fl">13.6</span>,<span class="fl">5.3</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(NBA_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the **View** function opens the data in an interactive window. Here you can sort the data by any given column. Note that the %&gt;% is called a “pipe”, and it is a convenient way of passing the antecedent to the first argument of the function that follows it. Of course this is the tip of the iceberg of what the <em>mutate</em> function can do. To learn more,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mutate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are an numerous ways to slice and dice our data, and Google knows them all. We highlight a couple here. To isolate cases in our data based on given characteristics, we can <strong>filter</strong>. Of the top 5 scorers, which grabbed double digit rebounds as well?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>NBA_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RPG<span class="sc">&gt;</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  Players       Team    PPG   RPG
  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Antetokounmpo MIL    27.7  12.5
2 Embiid        PHI    27.5  13.6</code></pre>
</div>
</div>
<p>Similarly, <strong>select</strong> isolated columns for us</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>NBA_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(Team)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  Team 
  &lt;chr&gt;
1 HOU  
2 OKC  
3 MIL  
4 PHI  
5 GSW  </code></pre>
</div>
</div>
<p>Note that we can chain pipes but they are not commutative:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>NBA_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RPG<span class="sc">&gt;</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Team)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  Team 
  &lt;chr&gt;
1 MIL  
2 PHI  </code></pre>
</div>
</div>
<p><strong>Pre-packaged data sets</strong></p>
<p>In addition to a set of built in packages and functions, R also comes with pre-loaded data sets for your exploration and practice. Click on the <strong>PACKAGES</strong> tab in the pane on the bottom right, and click on the <em>datasets</em> package. This</p>
<p><img src="images/paste-6955C0FC.png" class="img-fluid"></p>
<p>will list the contents of the package, which are data sets we can use for myriad statistical and machine learning applications. By clicking on any data set, or typing it in the help menu, you can get some details about the included variables. For example, we can learn about the trees data set as follows</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>?trees</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(trees)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   31 obs. of  3 variables:
 $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...
 $ Height: num  70 65 63 72 81 83 66 75 80 75 ...
 $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</code></pre>
</div>
</div>
<p>A common way to snapshot the data frame is through the <em>head</em> and <em>tail</em> functions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Girth Height Volume
1   8.3     70   10.3
2   8.6     65   10.3
3   8.8     63   10.2
4  10.5     72   16.4
5  10.7     81   18.8
6  10.8     83   19.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(trees)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Girth Height Volume
26  17.3     81   55.4
27  17.5     82   55.7
28  17.9     80   58.3
29  18.0     80   51.5
30  18.0     80   51.0
31  20.6     87   77.0</code></pre>
</div>
</div>
<p><strong>Other ways to get tabular data into R</strong></p>
<p><em>Import Button</em></p>
<p>RStudio offers more convenient ways to get your data into the project. The easiest way to do it is to click on the <img src="images/paste-73821DDA.png" class="img-fluid"> icon in the Environment pane. From there you can import data from a website, or upload local data from your machine. You do need to be aware of how the data is delimited (commas, tabs, etc) and other stylistic details. For example we can import the first 10 rows of the Point-in-Time estimates of homelessness by state from the US Dept of Housing and Urban Development (HUD) by pasting the following link <a href="https://www.huduser.gov/portal/sites/default/files/xls/2007-2022-PIT-Counts-by-CoC.xlsx" class="uri">https://www.huduser.gov/portal/sites/default/files/xls/2007-2022-PIT-Counts-by-CoC.xlsx</a></p>
<p>in the url field of the import -&gt; From Excel pop up window: Note also that we can change the name of the dataset, as well as copy the source code from this dialog.</p>
<p><img src="images/paste-F7C5770D.png" class="img-fluid"></p>
<p>Again we may use the <strong>View</strong> function to scope out the data.</p>
<p><em>Fread Function</em></p>
<p>The <strong>fread</strong> function in the <strong>data.table</strong> package is another convenient and effective way to read data in R. We can copy and paste delimited data from the web or a document, which will be automatically detected and formatted. The data table from which we extracted the NBA data is much more extensive, and would be unreasonable to input by hand. So let’s copy the data for the top 30 scorers from BasketballReference.com.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    between, first, last</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>NBA_Data_30<span class="ot">&lt;-</span><span class="fu">fread</span>(<span class="at">input=</span><span class="st">"Rk,Player,Pos,Age,Tm,G,GS,MP,FG,FGA,FG%,3P,3PA,3P%,2P,2PA,2P%,eFG%,FT,FTA,FT%,ORB,DRB,TRB,AST,STL,BLK,TOV,PF,PTS▼,Player-additional</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="st">1,James Harden,PG,29,HOU,78,78,36.8,10.8,24.5,.442,4.8,13.2,.368,6.0,11.3,.528,.541,9.7,11.0,.879,0.8,5.8,6.6,7.5,2.0,0.7,5.0,3.1,36.1,hardeja01</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="st">2,Paul George,SF,28,OKC,77,77,36.9,9.2,21.0,.438,3.8,9.8,.386,5.4,11.1,.484,.529,5.9,7.0,.839,1.4,6.8,8.2,4.1,2.2,0.4,2.7,2.8,28.0,georgpa01</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="st">3,Giannis Antetokounmpo,PF,24,MIL,72,72,32.8,10.0,17.3,.578,0.7,2.8,.256,9.3,14.5,.641,.599,6.9,9.5,.729,2.2,10.3,12.5,5.9,1.3,1.5,3.7,3.2,27.7,antetgi01</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="st">4,Joel Embiid,C,24,PHI,64,64,33.7,9.1,18.7,.484,1.2,4.1,.300,7.8,14.6,.535,.517,8.2,10.1,.804,2.5,11.1,13.6,3.7,0.7,1.9,3.5,3.3,27.5,embiijo01</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="st">5,Stephen Curry,PG,30,GSW,69,69,33.8,9.2,19.4,.472,5.1,11.7,.437,4.0,7.7,.525,.604,3.8,4.2,.916,0.7,4.7,5.3,5.2,1.3,0.4,2.8,2.4,27.3,curryst01</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="st">6,Devin Booker,SG,22,PHO,64,64,35.0,9.2,19.6,.467,2.1,6.5,.326,7.0,13.1,.536,.521,6.1,7.1,.866,0.6,3.5,4.1,6.8,0.9,0.2,4.1,3.1,26.6,bookede01</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="st">7,Kawhi Leonard,SF,27,TOR,60,60,34.0,9.3,18.8,.496,1.9,5.0,.371,7.5,13.8,.542,.546,6.1,7.1,.854,1.3,6.0,7.3,3.3,1.8,0.4,2.0,1.5,26.6,leonaka01</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="st">8,Kevin Durant,SF,30,GSW,78,78,34.6,9.2,17.7,.521,1.8,5.0,.353,7.5,12.8,.587,.571,5.7,6.5,.885,0.4,5.9,6.4,5.9,0.7,1.1,2.9,2.0,26.0,duranke01</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="st">9,Damian Lillard,PG,28,POR,80,80,35.5,8.5,19.2,.444,3.0,8.0,.369,5.6,11.1,.499,.522,5.9,6.4,.912,0.9,3.8,4.6,6.9,1.1,0.4,2.7,1.9,25.8,lillada01</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="st">10,Bradley Beal,SG,25,WAS,82,82,36.9,9.3,19.6,.475,2.5,7.3,.351,6.8,12.4,.548,.540,4.4,5.5,.808,1.1,3.9,5.0,5.5,1.5,0.7,2.7,2.8,25.6,bealbr01</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="st">11,Kemba Walker,PG,28,CHO,82,82,34.9,8.9,20.5,.434,3.2,8.9,.356,5.7,11.6,.494,.511,4.6,5.5,.844,0.6,3.8,4.4,5.9,1.2,0.4,2.6,1.6,25.6,walkeke02</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="st">12,Blake Griffin,PF,29,DET,75,75,35.0,8.3,17.9,.462,2.5,7.0,.362,5.7,10.9,.525,.532,5.5,7.3,.753,1.3,6.2,7.5,5.4,0.7,0.4,3.4,2.7,24.5,griffbl01</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="st">13,Karl-Anthony Towns,C,23,MIN,77,77,33.1,8.8,17.1,.518,1.8,4.6,.400,7.0,12.5,.562,.572,4.9,5.8,.836,3.4,9.0,12.4,3.4,0.9,1.6,3.1,3.8,24.4,townska01</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="st">14,Kyrie Irving,PG,26,BOS,67,67,33.0,9.0,18.5,.487,2.6,6.5,.401,6.4,12.0,.533,.557,3.2,3.7,.873,1.1,3.9,5.0,6.9,1.5,0.5,2.6,2.5,23.8,irvinky01</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="st">15,Donovan Mitchell,SG,22,UTA,77,77,33.7,8.6,19.9,.432,2.4,6.7,.362,6.1,13.1,.468,.493,4.1,5.1,.806,0.8,3.3,4.1,4.2,1.4,0.4,2.8,2.7,23.8,mitchdo01</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="st">16,Zach LaVine,SG,23,CHI,63,62,34.5,8.4,18.0,.467,1.9,5.1,.374,6.5,12.9,.504,.520,5.0,6.0,.832,0.6,4.0,4.7,4.5,1.0,0.4,3.4,2.2,23.7,lavinza01</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="st">17,Russell Westbrook,PG,30,OKC,73,73,36.0,8.6,20.2,.428,1.6,5.6,.290,7.0,14.5,.481,.468,4.1,6.2,.656,1.5,9.6,11.1,10.7,1.9,0.5,4.5,3.4,22.9,westbru01</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="st">18,Klay Thompson,SG,28,GSW,78,78,34.0,8.4,18.0,.467,3.1,7.7,.402,5.3,10.3,.516,.553,1.7,2.0,.816,0.5,3.4,3.8,2.4,1.1,0.6,1.5,2.0,21.5,thompkl01</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="st">19,Julius Randle,PF,24,NOP,73,49,30.6,7.8,14.9,.524,0.9,2.7,.344,6.9,12.2,.564,.555,4.9,6.7,.731,2.2,6.5,8.7,3.1,0.7,0.6,2.8,3.4,21.4,randlju01</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="st">20,LaMarcus Aldridge,C,33,SAS,81,81,33.2,8.4,16.3,.519,0.1,0.5,.238,8.3,15.8,.528,.522,4.3,5.1,.847,3.1,6.1,9.2,2.4,0.5,1.3,1.8,2.2,21.3,aldrila01</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="st">21,DeMar DeRozan,SG,29,SAS,77,77,34.9,8.2,17.1,.481,0.1,0.6,.156,8.1,16.5,.492,.483,4.8,5.7,.830,0.7,5.3,6.0,6.2,1.1,0.5,2.6,2.3,21.2,derozde01</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a><span class="st">22,Luka Dončić,SG,19,DAL,72,72,32.2,7.0,16.5,.427,2.3,7.1,.327,4.7,9.3,.503,.497,4.8,6.7,.713,1.2,6.6,7.8,6.0,1.1,0.3,3.4,1.9,21.2,doncilu01</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="st">23,Jrue Holiday,SG,28,NOP,67,67,35.9,8.2,17.3,.472,1.8,5.4,.325,6.4,11.9,.539,.523,3.1,4.0,.768,1.1,3.9,5.0,7.7,1.6,0.8,3.1,2.2,21.2,holidjr01</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="st">24,Mike Conley,PG,31,MEM,70,70,33.5,7.0,16.0,.438,2.2,6.1,.364,4.8,9.9,.483,.507,4.9,5.8,.845,0.6,2.8,3.4,6.4,1.3,0.3,1.9,1.8,21.1,conlemi01</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="st">25,D'Angelo Russell,PG,22,BRK,81,81,30.2,8.1,18.7,.434,2.9,7.8,.369,5.2,10.9,.482,.512,2.0,2.5,.780,0.7,3.2,3.9,7.0,1.2,0.2,3.1,1.7,21.1,russeda01</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="st">26,CJ McCollum,SG,27,POR,70,70,33.9,8.2,17.8,.459,2.4,6.4,.375,5.8,11.4,.506,.527,2.3,2.7,.828,0.9,3.1,4.0,3.0,0.8,0.4,1.5,2.5,21.0,mccolcj01</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="st">27,Nikola Vučević,C,28,ORL,80,80,31.4,8.8,16.9,.518,1.1,2.9,.364,7.7,14.0,.549,.549,2.2,2.8,.789,2.8,9.2,12.0,3.8,1.0,1.1,2.0,2.0,20.8,vucevni01</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="st">28,Buddy Hield,SG,26,SAC,82,82,31.9,7.6,16.6,.458,3.4,7.9,.427,4.2,8.6,.487,.560,2.1,2.4,.886,1.3,3.7,5.0,2.5,0.7,0.4,1.8,2.5,20.7,hieldbu01</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="st">29,Nikola Jokić,C,23,DEN,80,80,31.3,7.7,15.1,.511,1.0,3.4,.307,6.7,11.7,.569,.545,3.6,4.4,.821,2.9,8.0,10.8,7.3,1.4,0.7,3.1,2.9,20.1,jokicni01</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a><span class="st">30,Tobias Harris,PF,26,TOT,82,82,34.7,7.5,15.3,.487,1.9,4.8,.397,5.5,10.5,.528,.549,3.2,3.7,.866,0.8,7.0,7.9,2.8,0.6,0.5,1.8,2.2,20.0,harrito02"</span>)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(NBA_Data_30)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Visualizing Tabular Data in R</strong></p>
<p>The nature of the visualization, modelling and application of our data depends closely on the types of variables we are analyzing. The primary categorization is either <em>quantitative</em> or <em>qualitative.</em> Let’s use the <strong>ggplot2</strong> and related packages to see how we can create graphs that can provide insight into the NBA data.</p>
<p>To get a very effective snapshot of uni- and bi-variate characteristics of points and rebounds in the NBA data, the <strong>ggpairs</strong> function in the <strong>GGally</strong> package is a must.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'GGally':
  method from   
  +.gg   ggplot2</code></pre>
</div>
</div>
<p>Check it out:</p>
<pre class="{#{r}"><code>ggpairs(data=NBA_Data_30,columns=c(24,30))</code></pre>
<p>With a correlation coefficient of 0.073 and relatively trend free scatterplot, it sems that for top scorers, there is no correlation between points and rebounds. However if we add the qualitative position variable through the <em>aesthetic</em> (aes) argument to see how these vary and interact by position</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(<span class="at">data=</span>NBA_Data_30,<span class="at">columns=</span><span class="fu">c</span>(<span class="dv">24</span>,<span class="dv">30</span>),<span class="fu">aes</span>(<span class="at">color=</span>Pos,<span class="at">alpha=</span><span class="fl">0.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we see a great deal of variability in correlation values between positions. This is a simple example that illustrates the power visualization has to mine knowledge from data which otherwise might be difficult to ascertain.</p>
</section>
</section>
<section id="text-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Text Data</h1>
<section id="text-data-in-r" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="text-data-in-r"><span class="header-section-number">6.1</span> Text Data in R</h2>
</section>
</section>
<section id="image-data" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Image Data</h1>
<section id="image-data-in-r" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="image-data-in-r"><span class="header-section-number">7.1</span> Image Data in R</h2>
</section>
</section>
<section id="audio-data" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Audio Data</h1>
<section id="audio-data-in-r" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="audio-data-in-r"><span class="header-section-number">8.1</span> Audio Data in R</h2>
<p>Eventually we’ll want to delve into <a href="https://pytorch-tutorials-preview.netlify.app/intermediate/speech_recognition_pipeline_tutorial.html">speech recognition</a> using Wav2Vec2 and PyTorch.</p>
</section>
</section>
<section id="geospatial-data" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Geospatial Data</h1>
<section id="geospatial-data-in-r" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="geospatial-data-in-r"><span class="header-section-number">9.1</span> Geospatial Data in R</h2>
<section id="raster-tutorial" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="raster-tutorial"><span class="header-section-number">9.1.1</span> Raster Tutorial</h3>
<p>Raster Tutorial Source: https://www.neonscience.org/resources/learning-hub/tutorials/raster-data-r</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: sp</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'raster'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    select</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Please note that rgdal will be retired during 2023,
plan transition to sf/stars/terra functions using GDAL and PROJ
at your earliest convenience.
See https://r-spatial.org/r/2022/04/12/evolution.html and https://github.com/r-spatial/evolution
rgdal: version: 1.6-4, (SVN revision 1196)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 3.4.2, released 2022/03/08
Path to GDAL shared files: /Users/kagbasuaray/Library/Caches/org.R-project.R/R/renv/cache/v5/R-4.2/x86_64-apple-darwin17.0/rgdal/1.6-4/92183bff0bac3a711fde35a22c1bf45b/rgdal/gdal
GDAL binary built with GEOS: FALSE 
Loaded PROJ runtime: Rel. 8.2.1, January 1st, 2022, [PJ_VERSION: 821]
Path to PROJ shared files: /Users/kagbasuaray/Library/Caches/org.R-project.R/R/renv/cache/v5/R-4.2/x86_64-apple-darwin17.0/rgdal/1.6-4/92183bff0bac3a711fde35a22c1bf45b/rgdal/proj
PROJ CDN enabled: FALSE
Linking to sp version:1.5-1
To mute warnings of possible GDAL/OSR exportToProj4() degradation,
use options("rgdal_show_exportToProj4_warnings"="none") before loading sp or rgdal.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>DEM <span class="ot">&lt;-</span>  <span class="fu">raster</span>(<span class="fu">extent</span>(<span class="dv">188500</span>, <span class="dv">190350</span>, <span class="dv">227550</span>, <span class="dv">229550</span>), <span class="co"># xmin, xmax, ymin, ymax</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">res =</span> <span class="dv">50</span>, <span class="co"># resolution of 50 meters</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">crs =</span> <span class="dv">31370</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setValues</span>(<span class="fu">runif</span>(<span class="fu">ncell</span>(.)))  <span class="co"># fill with random values</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co">#raster("C:/Users/sean1/Documents/Stat 697/Homework/geospatial/NEON-DS-Field-Site-Spatial-Data/SJER/DigitalTerrainModel/SJER2013_DTM.tif")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>DEM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 40, 37, 1480  (nrow, ncol, ncell)
resolution : 50, 50  (x, y)
extent     : 188500, 190350, 227550, 229550  (xmin, xmax, ymin, ymax)
crs        : +proj=lcc +lat_0=90 +lon_0=4.36748666666667 +lat_1=51.1666672333333 +lat_2=49.8333339 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +units=m +no_defs 
source     : memory
names      : layer 
values     : 0.00131927, 0.9998783  (min, max)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>DEM <span class="ot">&lt;-</span> <span class="fu">setMinMax</span>(DEM)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>DEM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 40, 37, 1480  (nrow, ncol, ncell)
resolution : 50, 50  (x, y)
extent     : 188500, 190350, 227550, 229550  (xmin, xmax, ymin, ymax)
crs        : +proj=lcc +lat_0=90 +lon_0=4.36748666666667 +lat_1=51.1666672333333 +lat_2=49.8333339 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +units=m +no_defs 
source     : memory
names      : layer 
values     : 0.00131927, 0.9998783  (min, max)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the distribution of values in the raster</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(DEM, <span class="at">main=</span><span class="st">"Distribution of elevation values"</span>, </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span> <span class="st">"purple"</span>, </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">maxpixels=</span><span class="dv">22000000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(DEM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add a color map with 5 colors</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>col<span class="ot">=</span><span class="fu">terrain.colors</span>(<span class="dv">5</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># add breaks to the colormap (6 breaks = 5 segments)</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>brk <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="dv">300</span>, <span class="dv">350</span>, <span class="dv">400</span>, <span class="dv">450</span>, <span class="dv">500</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(DEM, <span class="at">col=</span>col, <span class="at">breaks=</span>brk, <span class="at">main=</span><span class="st">"DEM with more breaks"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Raster data is useful for displaying complex graphics as images are generated from individual pixels, making it fitting for digital photos or highly detailed maps (such as topographic maps).</p>
<p>Meanwhile, vector data is more useful for generating maps that wish to define regions of interest by broad shapes. Vector maps can be easier to parse due to the simpler display, and the use of vector graphics allow for the image to be easily scaled without loss of detail.</p>
<section id="data-types-for-raster-maps" class="level4" data-number="9.1.1.1">
<h4 data-number="9.1.1.1" class="anchored" data-anchor-id="data-types-for-raster-maps"><span class="header-section-number">9.1.1.1</span> Data types for raster maps</h4>
<p>As a raster map is generated pixel by pixel, image file formats such as png, pdf, jpg and gif can all be used. However, one of the most useful formats for raster data is the tif or Tag Image File format, which allows for the tagging of metadata onto the image data. This is particularly useful when generating maps as information regarding the coordinate system used, the location, and the resolution can be included to provide context for the resulting image.</p>
<p>Here is another useful source for learning about raster data: https://datacarpentry.org/organization-geospatial/01-intro-raster-data/</p>
</section>
</section>
<section id="looking-at-a-topographical-map-of-catalina-island-and-the-south-bay" class="level3" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="looking-at-a-topographical-map-of-catalina-island-and-the-south-bay"><span class="header-section-number">9.1.2</span> Looking at a topographical map of Catalina Island and the South Bay</h3>
<p>Data explanation and source: https://www.sciencebase.gov/catalog/item/5f77842182ce1d74e7d6c3cb</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>la <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">'/Users/kagbasuaray/Downloads/MOD_LSTD_CLIM_M_2001-12-01_rgb_360x180.TIFF'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>la <span class="ot">&lt;-</span><span class="fu">setMinMax</span>(la)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>la</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 180, 360, 64800  (nrow, ncol, ncell)
resolution : 1, 1  (x, y)
extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
crs        : +proj=longlat +datum=WGS84 +no_defs 
source     : MOD_LSTD_CLIM_M_2001-12-01_rgb_360x180.TIFF 
names      : MOD_LSTD_CLIM_M_2001.12.01_rgb_360x180 
values     : 1, 255  (min, max)</code></pre>
</div>
</div>
<p>The extent of (xmin:-119.0006, xmax:-117.9994, ymin:32.99944, ymax:34.00056) refers to the range of latitude and longitude in this image. The coordinate system NAD83 refers to the North American Datum of 1983, a model commonly used for accurately measuring and displaying locations in North America (see https://en.wikipedia.org/wiki/North_American_Datum). The values -5.670049 and 640.6235 refer to the lowest and highest points of elevation in meters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(la)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This greener parts of the map show higher elevation, and the whiter parts show sea level. The legend is in units of meters. The highest value in the dataset is 640.6235 meters, which corresponds to the highest point of elevation on Catalina Island (according to Wikipedia).</p>
<p>Note: The map below doesn’t turn out as well so I wouldn’t include it in the final file, I just have it here as I included it in my demonstration on Monday 2/6. The map above I found on 2/7 and I believe is a much better fit for a raster demonstration.</p>
</section>
<section id="looking-at-raster-data-with-los-angeles-raster-file" class="level3" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="looking-at-raster-data-with-los-angeles-raster-file"><span class="header-section-number">9.1.3</span> Looking at raster data with Los Angeles raster file</h3>
<p>Data from: https://www.faa.gov/air_traffic/flight_info/aeronav/digital_products/vfr/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>LOS_AN <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">'/Users/kagbasuaray/Downloads/Los_Angeles/Los Angeles SEC.tif'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>LOS_AN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 12349, 16645, 205549105  (nrow, ncol, ncell)
resolution : 42.33503, 42.33597  (x, y)
extent     : -351020.5, 353646.1, -245067.9, 277739  (xmin, xmax, ymin, ymax)
crs        : +proj=lcc +lat_0=34.1666666666667 +lon_0=-118.466666666667 +lat_1=38.6666666666667 +lat_2=33.3333333333333 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs 
source     : Los Angeles SEC.tif 
names      : Los.Angeles.SEC </code></pre>
</div>
</div>
<p>LCC map projection is a conical projection mainly used for aeronautical charts (see https://en.wikipedia.org/wiki/Lambert_conformal_conic_projection)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(LOS_AN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(LOS_AN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-28-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While not perfect, these graphics still roughly display areas of higher and lower elevations, as well as water features. The darker the green, generally the higher the elevation.</p>
</section>
<section id="osmdata-package" class="level3" data-number="9.1.4">
<h3 data-number="9.1.4" class="anchored" data-anchor-id="osmdata-package"><span class="header-section-number">9.1.4</span> OSMDATA Package</h3>
<p><u><strong>Video tutorial</strong></u> for an interesting use of geospatial data to map gun violence in Chicago: https://youtu.be/uZtto0cYjZM</p>
<p>Unfortunately, this video tutorial is not 100% complete in its process as it glosses over how it converts the data from city blocks into exact coordinates. With some effort I’m sure it’s not too bad to figure out though. A tutorial on geocoding could help in this matter.</p>
<hr>
<section id="web-tutorial-used-for-this-exercise" class="level4" data-number="9.1.4.1">
<h4 data-number="9.1.4.1" class="anchored" data-anchor-id="web-tutorial-used-for-this-exercise"><span class="header-section-number">9.1.4.1</span> <u>Web tutorial</u> used for this exercise:</h4>
<p>https://www.mzes.uni-mannheim.de/socialsciencedatalab/article/geospatial-data/#gathering-geospatial-data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.10.2, GDAL 3.4.2, PROJ 8.2.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: grid</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ggsn'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:raster':

    scalebar</code></pre>
</div>
</div>
<p>This tutorial generates a map of the city Mannheim in Germany with streets and buidings.</p>
<p>OSMdata is a package that imports map data from OpenStreetMap (OSM) into R as sf (simple features) or sp (spatial data) objects.</p>
<p><strong>Mannheim Border</strong></p>
<p>This code chunk imports the map data and selects the data to generate the borders for the city of Mannheim</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>mannheim <span class="ot">&lt;-</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Queries the database for places named Mannheim</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">getbb</span>(<span class="st">"Mannheim"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adds a timeout function if the query takes too long</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="at">timeout =</span> <span class="dv">25</span><span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Limits the query to cities of the admin level 6. Lower admin levels refer to larger places (Germany is admin level 2)</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">add_osm_feature</span>(</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">key =</span> <span class="st">"admin_level"</span>, </span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="st">"6"</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Returns the queried data in an sf(simple feature) format. This is a large amount of data (74.4 MB) containing info on names, codes and shape data (lines and points) for numerous features (everything from roads to borders to traffic sign locations)</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">osmdata_sf</span>() <span class="sc">%$%</span> </span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#This focuses the data again to be particularly shape data for Mannheim at the city level</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>  osm_multipolygons <span class="sc">%&gt;%</span> </span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Mannheim"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Selects just the geometry for the city of Mannheim AKA Mannheim's borders </span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Transforms the shape to fit the coordinate system for that region of the world. 3035 is the coordinate system code used to cover most of Europe. See https://epsg.io/3035. This transformation corrects the orientation of the generated shape.</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">3035</span>) </span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>mannheim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 4206252 ymin: 2923007 xmax: 4218767 ymax: 2943155
Projected CRS: ETRS89-extended / LAEA Europe
                        geometry
1 MULTIPOLYGON (((4209130 293...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This code plots the shape generated above, creating a shape that depicts the borders of Mannheim</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mannheim, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  ggsn<span class="sc">::</span><span class="fu">blank</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Mannheim Roads</strong></p>
<p>This code chunk selects road lines data for the city of Mannheim</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Queries the database for 'Mannheim'</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">getbb</span>(<span class="st">"Mannheim"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adds a timeout feature for the query</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="at">timeout =</span> <span class="dv">25</span><span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Specifies the query to look at the highway data. Trunk, primary, secondary and tertiary are various highway classifications</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">add_osm_feature</span>(</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">key =</span> <span class="st">"highway"</span>, </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">c</span>(</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"trunk"</span>, </span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"primary"</span>, </span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"secondary"</span>, </span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"tertiary"</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Returns the queried data in an sf(simple feature) format</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">osmdata_sf</span>() <span class="sc">%$%</span> </span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Specifies the line data</span></span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>  osm_lines <span class="sc">%&gt;%</span> </span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Selects the geometry data</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span></span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Transforms the line shapes to the 3035(most of Europe) coordinate system</span></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">3035</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">#st_intersection makes sure to only keep the parts of the lines that overlap with the 'mannheim' shape object generated earlier. Without this step, roads would be displayed going outside the borders.</span></span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_intersection</span>(mannheim) <span class="sc">%&gt;%</span> </span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Keeps only the line shape data. Without this step, unwanted points will also be placed on image.</span></span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_is</span>(., <span class="st">"LINESTRING"</span>)</span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Mannheim Buildings</strong></p>
<p>This code chunk selects building shape data for the city of Mannheim</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>buildings <span class="ot">&lt;-</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Queries the database for 'Mannheim'</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">getbb</span>(<span class="st">"Mannheim"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adds a timeout feature for the query</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="at">timeout =</span> <span class="dv">25</span><span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Specifies the query to look for buildings of various classifications</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">add_osm_feature</span>(</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">key =</span> <span class="st">"building"</span>, </span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">c</span>(</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"apartments"</span>, <span class="st">"commercial"</span>, </span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"office"</span>, <span class="st">"cathredral"</span>, <span class="st">"church"</span>, </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"retail"</span>, <span class="st">"industrial"</span>, <span class="st">"warehouse"</span>, </span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"hotel"</span>, <span class="st">"house"</span>, <span class="st">"civic"</span>, </span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"government"</span>, <span class="st">"public"</span>, <span class="st">"parking"</span>, </span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"garages"</span>, <span class="st">"carport"</span>, </span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">"transportation"</span>, </span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">"semidetached_house"</span>, <span class="st">"school"</span>, </span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">"conservatory"</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Returns the queried data in an sf(simple feature) format</span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">osmdata_sf</span>() <span class="sc">%$%</span> </span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Specifies the polygon data</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>  osm_polygons <span class="sc">%&gt;%</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Selects the geometry data</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Transforms the shapes to the appropriate coordinate system (3035 for this part of Europe)</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">3035</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Keeps only the parts of the shapes that overlap with the 'mannheim' shape object created earlier, that way buildings that fall outside the border are not displayed.</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_intersection</span>(mannheim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Full Mannheim Map</strong></p>
<p>This code chunk puts the previous data chunks together, overlaying the road lines and building shapes onto the Mannheim city shape, generating a simple map. The black lines are roads and the dark gray shapes are buildings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mannheim) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> roads) <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> buildings) <span class="sc">+</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  ggsn<span class="sc">::</span><span class="fu">blank</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="bonus-map---torrance" class="level4" data-number="9.1.4.2">
<h4 data-number="9.1.4.2" class="anchored" data-anchor-id="bonus-map---torrance"><span class="header-section-number">9.1.4.2</span> Bonus Map - Torrance</h4>
<p>For fun I tried this exercise for the city of Torrance. There were a few tricky points of note for applying the same code to Torrance. One is that Torrance is at a higher admin level of 8 which you have to see by checking for Torrance’s information on OpenStreetMap. Two is that Torrance uses a different coordinate system than Europe, so without adjusting the transformation number, the city is oriented all wrong. After some searching I found a site that lists all the coordinate codes used for different regions of the world: https://spatialreference.org/. For Southern California, the code is 2874.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>torrance <span class="ot">&lt;-</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">getbb</span>(<span class="st">"torrance CA USA"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="at">timeout =</span> <span class="dv">25</span><span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">add_osm_feature</span>(</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">key =</span> <span class="st">"admin_level"</span>, </span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="st">"8"</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  osmdata<span class="sc">::</span><span class="fu">osmdata_sf</span>() <span class="sc">%$%</span> </span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  osm_multipolygons <span class="sc">%&gt;%</span> </span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Torrance"</span>) <span class="sc">%&gt;%</span> <span class="co"># filter on city level</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">2874</span>) </span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>torrance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 6415094 ymin: 1742587 xmax: 6468064 ymax: 1781454
Projected CRS: NAD83(HARN) / California zone 5 (ftUS)
                        geometry
1 MULTIPOLYGON (((6458208 174...</code></pre>
</div>
</div>
<p>We note that I was having trouble with getting the highway data and building data for Torrance, so this is just the border of the city. The long prong is the part of Torrance that reaches the beach and apparently the jurisdiction extends a few miles into the ocean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(torrance, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  ggsn<span class="sc">::</span><span class="fu">blank</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="eda_R_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="section" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="section"><span class="header-section-number">9.2</span> </h2>
</section>
<section id="geospatial-data-in-python" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="geospatial-data-in-python"><span class="header-section-number">9.3</span> Geospatial Data in Python</h2>
</section>
</section>
<section id="database-query-with-sql" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Database Query with SQL</h1>
<p>R allows you to write SQL from R by connecting to a database, write DPlyr and the use function to generate SQL. We do not have to know SQL and we can use R code generate SQL queries. Let’s use the <a href="https://data.world/" class="uri">https://data.world/</a> database to se how this is done. First we’ll install the package from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: usethis</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"datadotworld/data.world-r"</span>, <span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Skipping install of 'data.world' from a github remote, the SHA1 (a1fd7656) has not changed since last install.
  Use `force = TRUE` to force installation</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>saved_cfg <span class="ot">&lt;-</span> data.world<span class="sc">::</span><span class="fu">save_config</span>(<span class="st">"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJyLWFuZC1yLXN0dWRpbzprc3VhcmF5IiwiaXNzIjoiY2xpZW50OnItYW5kLXItc3R1ZGlvOmFnZW50OmtzdWFyYXk6OjJjZDRmOWYzLWQ2YzgtNDJhNi1hMDgzLTg0MTZiYzZhMWZiOCIsImlhdCI6MTY3MjcxNDk1Mywicm9sZSI6WyJ1c2VyX2FwaV9hZG1pbiIsInVzZXJfYXBpX3JlYWQiLCJ1c2VyX2FwaV93cml0ZSJdLCJnZW5lcmFsLXB1cnBvc2UiOnRydWUsInNhbWwiOnt9fQ.Mxb-8ivufGegxMMsQ2E2KEcRZjHqOeCdw4Y35CCnxNxn6StLsWy2X-cfOFMVF82LzDny2mXFNNd2Ft_ouehsmg"</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>data.world<span class="sc">::</span><span class="fu">set_config</span>(saved_cfg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"data.world"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: dwapi</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dwapi'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:usethis':

    create_project</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    sql</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages
───────────────────────────────────────
tidyverse 1.3.2 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ tibble  3.1.8     ✔ purrr   1.0.1
✔ tidyr   1.3.0     ✔ stringr 1.5.0
✔ readr   2.1.4     ✔ forcats 0.5.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ data.table::between() masks dplyr::between()
✖ tidyr::extract()      masks raster::extract()
✖ dplyr::filter()       masks stats::filter()
✖ data.table::first()   masks dplyr::first()
✖ dplyr::lag()          masks stats::lag()
✖ data.table::last()    masks dplyr::last()
✖ raster::select()      masks dplyr::select()
✖ dwapi::sql()          masks dplyr::sql()
✖ purrr::transpose()    masks data.table::transpose()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">"quickstart"</span>, <span class="at">package =</span> <span class="st">"data.world"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starting httpd help server ... done</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>?data.world</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>ovrvw <span class="ot">&lt;-</span> <span class="st">"https://data.world/health/big-cities-health"</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>bchdi <span class="ot">&lt;-</span> data.world<span class="sc">::</span><span class="fu">query</span>(</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  data.world<span class="sc">::</span><span class="fu">qry_sql</span>(<span class="st">"SELECT * FROM Big_Cities_Health_Data_Inventory"</span>),</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> ovrvw</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 13512 Columns: 11
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (9): indicator_category, indicator, gender, race_ethnicity, place, bchc_...
dbl (2): year, value

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(bchdi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="interactive-data-visualization" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Interactive Data Visualization</h1>
<section id="enhanced-graphics-with-plotly" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="enhanced-graphics-with-plotly"><span class="header-section-number">11.1</span> Enhanced Graphics with Plotly</h2>
</section>
<section id="shiny-apps" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="shiny-apps"><span class="header-section-number">11.2</span> Shiny Apps</h2>
</section>
</section>
<section id="building-apps-for-data-exploration" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Building Apps for Data Exploration</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./prerequisites.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Prerequisites</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./eda_Py.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis in Python</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>